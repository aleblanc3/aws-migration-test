<p-table
  [value]="headings"
  size="small"
  stripedRows
  [tableStyle]="{ 'min-width': '50rem' }"
  selectionMode="single"
  [(selection)]="selectedHeading"
  dataKey="order"
  metaKeySelection="false"
>
  <!-- 只用你自己的 cols 渲染表头 -->
  <ng-template pTemplate="header">
    <tr>
      <th style="width: 3rem"></th>
      <th *ngFor="let col of cols">{{ col.header }}</th>
    </tr>
  </ng-template>

  <!-- 只用你自己的 cols 渲染表体 -->
  <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
    <tr [pReorderableRow]="rowIndex" [pSelectableRow]="rowData">
      <td><span class="pi pi-bars" pReorderableRowHandle></span></td>

      <td *ngFor="let col of cols">
        <ng-container [ngSwitch]="col.field">
          <span *ngSwitchCase="'order'">{{ rowData.order }}</span>
          <span *ngSwitchCase="'type'">{{ rowData.type }}</span>

          <span
            *ngSwitchCase="'text'"
            [ngClass]="getTextClass(rowData)"
            [ngStyle]="getTextStyle(rowData)"
          >
            {{ rowData.text }}
            <div class="muted" *ngIf="rowData.href">({{ rowData.href }})</div>
          </span>

          <span *ngSwitchCase="'destH1'" class="break-all">
            {{ rowData.destH1 || "—" }}
          </span>

          <span *ngSwitchCase="'matchStatus'" class="flex justify-center">
            <i
              *ngIf="rowData.matchStatus === 'match'"
              class="pi pi-check-circle text-ok"
              title="Match"
            ></i>
            <i
              *ngIf="rowData.matchStatus === 'mismatch'"
              class="pi pi-times-circle text-bad"
              title="Mismatch"
            ></i>
            <i
              *ngIf="
                rowData.matchStatus === 'unknown' ||
                rowData.matchStatus === 'na'
              "
              class="pi pi-question-circle text-unk"
              title="Unknown"
            ></i>
          </span>

          <span *ngSwitchDefault>{{ rowData[col.field] }}</span>
        </ng-container>
      </td>
    </tr>
  </ng-template>
</p-table>
